--- 
layout: post
title: "Cassette Tutorial #1"
tags: []

status: draft
type: post
published: false
meta: 
  _edit_last: "1"
---
<p>When was the last time you tried something new and thought “Why haven’t I been doing it this way all along?” <a href="http://twitter.com/andrewdavey" target="_blank">Andrew Davey</a> created Knapsack, a framework to handle web assets like javascript and css, only to discover the name was trademarked. He turned that in to an opportunity to start over and create something even better. <a href="https://github.com/andrewdavey/cassette" target="_blank">Cassette</a> was born.</p>  <p>Out of the box, Cassette will sort out all of your javascript and css dependencies. In production, it will minify and merge those assets. </p>  <p>I think this framework deserves a good step-by-step tutorial. You’ll need Visual Studio 2010 with ASP.NET MVC 3 and NuGet.</p>  <h2>Getting Started</h2>  <p>Create a new, empty MVC 3 web app using the Razor view engine.</p>  <p>Pull up the installed NuGet packages by right-clicking on References, selecting Manage NuGet Packages, and clicking on the Installed packages.group.:</p>  <p>Remove these three NuGet packages by selecting the package and clicking Uninstall</p>  <ul>   <li>Entity Framework </li>    <li>jQuery Validation </li>    <li>jQuery Visual Studio 2010 IntelliSense </li> </ul>  <p>Install these NuGet packages. Go to the Online group, then search by name or use the nuget console.</p>  <ul>   <li>Cassette.Web </li>    <li>knockoutjs </li> </ul>  <p>You’ll end up with a scripts folder that looks something like this. Don’t be afraid. This mess of javascript is exactly why I’m showing you Cassette.</p>  <p><a href="http://jasondentler.com/blog/wp-content/uploads/2011/08/image.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://jasondentler.com/blog/wp-content/uploads/2011/08/image_thumb.png" width="429" height="810" /></a></p>  <p>Since Cassette will automatically minify our scripts for us in production, we’ll only need the full, hopefully human-readable copies of these javascript frameworks. Plus, there’s some stuff we just won’t need. Delete these files (or whatever version of them you may have):</p>  <ul>   <li>jquery-1.5.1.min.js </li>    <li>jquery-ui-1.8.11.min.js </li>    <li>jQuery.tmpl.min.js </li>    <li>jquery.unobtrusive-ajax.js </li>    <li>jquery.unobtrusive-ajax.min.js </li>    <li>jquery.validate.unobtrusive.js </li>    <li>jquery.validate.unobtrusive.min.js </li>    <li>knockout-1.2.1.js </li>    <li>Microsoft*.js </li>    <li>modernizr-1.7.min.js </li> </ul>  <p>Cassette allows you to set up a tree of javascript dependencies. So, if your page uses Knockout.js, which requires jquery.tmpl.js, which requires jquery.js, you just reference your script. Cassette will automatically include the other script tags for you. More on that later.</p>  <p>Now, you don’t want to reference jQuery 1.5.1. You want to reference whatever version jQuery you happen to have. Right? Okay. Rename your js files and remove those version numbers. The final result should look like this:</p>  <p><a href="http://jasondentler.com/blog/wp-content/uploads/2011/08/image1.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://jasondentler.com/blog/wp-content/uploads/2011/08/image_thumb1.png" width="429" height="422" /></a></p>  

<p>Let's also rename the /Content/themes/base folder to /Content/jquery-ui</p>

<p>We’ve renamed these files, so they’re not going to be properly updated by NuGet anymore. Let’s remove those packages. </p>  <ul>   <li>Modernizr </li>    <li>KnockoutJs </li>    <li>jQuery UI </li>    <li>jQuery.Templates </li>    <li>jQuery </li> </ul>  <p>This will leave you with these 4 packages:</p>  <ul>   <li>AjaxMin </li>    <li>Cassette </li>    <li>Cassette.Web </li>    <li>Jurassic </li> </ul>  <p>As a final step, let’s get a minimal website working.</p>  <p>Open the _Layout.cshtml and remove the link and script tags. </p>  <p>Create an “empty” HomeController with Index action and corresponding view. </p>  <p>Now run your web site, just to be sure it all works.</p>
